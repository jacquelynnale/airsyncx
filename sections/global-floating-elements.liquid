<!-- Global Floating Elements for All Sections -->
<div id="global-floating-elements"></div>

<style>
  #global-floating-elements {
    position: fixed;
    pointer-events: none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: 999;
    overflow: hidden;
  }
  
  .global-float-element {
    position: absolute;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  
  .global-float-element svg {
    filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.4));
  }
  
  /* רשימת אלמנטים שקשורים למתאם לקארפליי אלחוטי */
  .float-icon-wifi {
    animation: float-animation1 20s infinite ease-in-out;
  }
  
  .float-icon-bluetooth {
    animation: float-animation2 25s infinite ease-in-out;
  }
  
  .float-icon-car {
    animation: float-animation3 22s infinite ease-in-out;
  }
  
  .float-icon-phone {
    animation: float-animation4 18s infinite ease-in-out;
  }
  
  .float-icon-apple {
    animation: float-animation5 23s infinite ease-in-out;
  }
  
  .float-icon-connector {
    animation: float-animation6 19s infinite ease-in-out;
  }
  
  .float-icon-screen {
    animation: float-animation7 21s infinite ease-in-out;
  }
  
  @keyframes float-animation1 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.7); }
    50% { transform: translate(-30px, 20px) rotate(5deg) scale(1); }
  }
  
  @keyframes float-animation2 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.8); }
    50% { transform: translate(25px, -15px) rotate(-8deg) scale(1.1); }
  }
  
  @keyframes float-animation3 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.6); }
    50% { transform: translate(-20px, -25px) rotate(3deg) scale(0.9); }
  }
  
  @keyframes float-animation4 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.9); }
    50% { transform: translate(15px, 30px) rotate(-5deg) scale(1.2); }
  }
  
  @keyframes float-animation5 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.7); }
    50% { transform: translate(-25px, -10px) rotate(10deg) scale(1); }
  }
  
  @keyframes float-animation6 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.8); }
    50% { transform: translate(30px, 5px) rotate(-10deg) scale(1.1); }
  }
  
  @keyframes float-animation7 {
    0%, 100% { transform: translate(0, 0) rotate(0deg) scale(0.7); }
    50% { transform: translate(-15px, 20px) rotate(5deg) scale(0.9); }
  }
  
  @media (prefers-reduced-motion: reduce) {
    .global-float-element {
      animation: none !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // רשימת סקשנים שנרצה להוסיף אליהם אלמנטים צפים
    const sectionSelectors = [
      '.airsyncx-hero',
      '.airsyncx-why-us',
      '.airsyncx-product-features',
      '.airsyncx-how-it-works',
      '.airsyncx-about',
      '.airsyncx-tech-specs',
      '.airsyncx-reviews',
      '.airsyncx-installation-guide',
      '.section-product-features',
      '.section-rich-text',
      '.section-multicolumn',
      '.section-custom-columns'
    ];
    
    // אוסף של אייקונים הקשורים למתאם CarPlay אלחוטי
    const floatingIcons = [
      // WiFi אייקון
      {
        type: 'wifi',
        svg: '<svg viewBox="0 0 24 24" width="40" height="40"><path fill="rgba(56, 210, 210, 0.6)" d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z"></path></svg>'
      },
      // Bluetooth אייקון
      {
        type: 'bluetooth',
        svg: '<svg viewBox="0 0 24 24" width="30" height="30"><path fill="rgba(56, 210, 210, 0.6)" d="M14.88,16.29L13,18.17V14.41M13,5.83L14.88,7.71L13,9.58M17.71,7.71L12,2H11V9.58L6.41,5L5,6.41L10.59,12L5,17.58L6.41,19L11,14.41V22H12L17.71,16.29L13.41,12L17.71,7.71Z"></path></svg>'
      },
      // Car אייקון
      {
        type: 'car',
        svg: '<svg viewBox="0 0 24 24" width="45" height="45"><path fill="rgba(56, 210, 210, 0.5)" d="M5,11L6.5,6.5H17.5L19,11M17.5,16A1.5,1.5 0 0,1 16,14.5A1.5,1.5 0 0,1 17.5,13A1.5,1.5 0 0,1 19,14.5A1.5,1.5 0 0,1 17.5,16M6.5,16A1.5,1.5 0 0,1 5,14.5A1.5,1.5 0 0,1 6.5,13A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 6.5,16M18.92,6C18.72,5.42 18.16,5 17.5,5H6.5C5.84,5 5.28,5.42 5.08,6L3,12V20A1,1 0 0,0 4,21H5A1,1 0 0,0 6,20V19H18V20A1,1 0 0,0 19,21H20A1,1 0 0,0 21,20V12L18.92,6Z"></path></svg>'
      },
      // Phone אייקון
      {
        type: 'phone',
        svg: '<svg viewBox="0 0 24 24" width="25" height="25"><path fill="rgba(56, 210, 210, 0.5)" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z"></path></svg>'
      },
      // Apple אייקון
      {
        type: 'apple',
        svg: '<svg viewBox="0 0 24 24" width="35" height="35"><path fill="rgba(56, 210, 210, 0.6)" d="M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z"></path></svg>'
      },
      // USB-C מחבר
      {
        type: 'connector',
        svg: '<svg viewBox="0 0 24 24" width="30" height="30"><path fill="rgba(56, 210, 210, 0.6)" d="M15,7V11H16V13H8V11H9V7H7V11H3V13H7V17H9V13H15V17H17V13H21V11H17V7H15M8,9H11V11H8V9M13,9H16V11H13V9Z"></path></svg>'
      },
      // מסך CarPlay
      {
        type: 'screen',
        svg: '<svg viewBox="0 0 24 24" width="50" height="30"><rect x="2" y="4" width="20" height="16" rx="2" fill="rgba(56, 210, 210, 0.2)" stroke="rgba(56, 210, 210, 0.6)" stroke-width="1"/><line x1="7" y1="2" x2="17" y2="2" stroke="rgba(56, 210, 210, 0.6)" stroke-width="1"/><line x1="12" y1="2" x2="12" y2="4" stroke="rgba(56, 210, 210, 0.6)" stroke-width="1"/></svg>'
      }
    ];
    
    // פונקציה ליצירת אלמנטים צפים סביב הכותרות
    function createFloatingElements() {
      const floatingContainer = document.getElementById('global-floating-elements');
      
      // נמצא את כל הסקשנים בדף
      sectionSelectors.forEach(selector => {
        const sections = document.querySelectorAll(selector);
        
        sections.forEach(section => {
          // נמצא את כותרת הסקשן
          const headings = section.querySelectorAll('h1, h2, h3, h4');
          
          headings.forEach(heading => {
            // קבל את המיקום של הכותרת
            const rect = heading.getBoundingClientRect();
            const scrollY = window.scrollY;
            
            // נוסיף 3-5 אלמנטים צפים אקראיים סביב הכותרת
            const numElements = Math.floor(Math.random() * 3) + 3; // 3-5 אלמנטים
            
            for (let i = 0; i < numElements; i++) {
              // בחר אייקון אקראי מהרשימה
              const randomIcon = floatingIcons[Math.floor(Math.random() * floatingIcons.length)];
              
              // יצירת אלמנט צף
              const floatElement = document.createElement('div');
              floatElement.classList.add('global-float-element', 'float-icon-' + randomIcon.type);
              floatElement.innerHTML = randomIcon.svg;
              
              // מיקום אקראי מסביב לכותרת
              const radius = Math.random() * 200 + 100; // רדיוס 100-300px
              const angle = Math.random() * Math.PI * 2; // זווית אקראית
              
              const centerX = rect.left + rect.width / 2;
              const centerY = rect.top + scrollY + rect.height / 2;
              
              const x = centerX + Math.cos(angle) * radius;
              const y = centerY + Math.sin(angle) * radius;
              
              // הגדרת המיקום והשקיפות
              floatElement.style.left = x + 'px';
              floatElement.style.top = y + 'px';
              floatElement.style.opacity = '0.' + (Math.floor(Math.random() * 5) + 3); // שקיפות 0.3-0.7
              
              // הגדרת תזמון הופעה והעלמה
              const delay = Math.random() * 4; // 0-4 שניות
              floatElement.style.animationDelay = delay + 's';
              
              // הוספה למיכל
              floatingContainer.appendChild(floatElement);
            }
          });
        });
      });
      
      // מטפל בהופעת והעלמת אלמנטים כשהם בתוך נקודת התצוגה
      handleVisibility();
    }
    
    // פונקציה לטיפול בהופעה והעלמה של אלמנטים כשהם בתוך נקודת התצוגה
    function handleVisibility() {
      const elements = document.querySelectorAll('.global-float-element');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = entry.target.style.opacity.replace('0', '0.'); // שחזר שקיפות מקורית
          } else {
            entry.target.style.opacity = '0';
          }
        });
      }, { threshold: 0.1 });
      
      elements.forEach(element => {
        observer.observe(element);
      });
    }
    
    // קריאה לפונקציה ליצירת האלמנטים הצפים
    setTimeout(createFloatingElements, 1000); // נחכה שניה כדי לתת לדף להיטען
    
    // עדכון מיקום האלמנטים הצפים בעת גלילה
    window.addEventListener('resize', function() {
      // נסיר אלמנטים ישנים
      const container = document.getElementById('global-floating-elements');
      container.innerHTML = '';
      
      // וניצור חדשים
      setTimeout(createFloatingElements, 500);
    });
  });
</script>

{% schema %}
{
  "name": "Floating Elements",
  "class": "global-floating-elements",
  "settings": [],
  "presets": [
    {
      "name": "Floating Elements",
      "category": "Custom"
    }
  ]
}
{% endschema %} 